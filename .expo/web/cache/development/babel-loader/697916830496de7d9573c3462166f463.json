{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\p_projects\\\\highlights-web\\\\components\\\\NewMessage.tsx\";\n\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"../components/Alert\";\nimport { Text, View, TouchableOpacity } from \"./Themed\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { fetchAPI } from \"../graphql/FetchAPI\";\nimport { getThreadCategories, createMessage, sendDirectMessage } from \"../graphql/QueriesAndMutations\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { RichEditor } from \"react-native-pell-rich-editor\";\nimport FileUpload from \"./UploadFiles\";\nimport { PreferredLanguageText } from \"../helpers/LanguageContext\";\n\nvar NewMessage = function NewMessage(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isPrivate = _useState4[0],\n      setIsPrivate = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      anonymous = _useState6[0],\n      setAnonymous = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      customCategory = _useState8[0],\n      setCustomCategory = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      categories = _useState10[0],\n      setCategories = _useState10[1];\n\n  var RichText = useRef();\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      addCustomCategory = _useState12[0],\n      setAddCustomCategory = _useState12[1];\n\n  var _useState13 = useState(props.channelId),\n      _useState14 = _slicedToArray(_useState13, 1),\n      channelId = _useState14[0];\n\n  var _useState15 = useState(props.cueId),\n      _useState16 = _slicedToArray(_useState15, 1),\n      cueId = _useState16[0];\n\n  var _useState17 = useState(props.parentId),\n      _useState18 = _slicedToArray(_useState17, 1),\n      parentId = _useState18[0];\n\n  var now = new Date();\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      imported = _useState20[0],\n      setImported = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      url = _useState22[0],\n      setUrl = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      type = _useState24[0],\n      setType = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      title = _useState26[0],\n      setTitle = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      showImportOptions = _useState28[0],\n      setShowImportOptions = _useState28[1];\n\n  var unableToPostAlert = PreferredLanguageText(\"unableToPost\");\n  var somethingWentWrongAlert = PreferredLanguageText(\"somethingWentWrong\");\n  var checkConnectionAlert = PreferredLanguageText(\"checkConnection\");\n  useEffect(function () {\n    if (message[0] === \"{\" && message[message.length - 1] === \"}\") {\n      var obj = JSON.parse(message);\n      setImported(true);\n      setUrl(obj.url);\n      setType(obj.type);\n    } else {\n      setImported(false);\n      setUrl(\"\");\n      setType(\"\");\n      setTitle(\"\");\n    }\n  }, [message]);\n  var loadCategories = useCallback(function _callee() {\n    var server;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(channelId === undefined || channelId === null || channelId === \"\")) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            server = fetchAPI(\"\");\n            server.query({\n              query: getThreadCategories,\n              variables: {\n                channelId: channelId\n              }\n            }).then(function (res) {\n              if (res.data.thread && res.data.thread.getChannelThreadCategories) {\n                setCategories(res.data.thread.getChannelThreadCategories);\n              }\n            }).catch(function (err) {});\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [channelId]);\n  var createDirectMessage = useCallback(function _callee2() {\n    var u, user, users, saveCue, obj, server;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"user\"));\n\n          case 2:\n            u = _context2.sent;\n\n            if (!(!message || message === \"\" || !u)) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 5:\n            user = JSON.parse(u);\n            users = props.addUserId ? [user._id].concat(_toConsumableArray(props.users)) : props.users;\n            saveCue = \"\";\n\n            if (imported) {\n              obj = {\n                type: type,\n                url: url,\n                title: title\n              };\n              saveCue = JSON.stringify(obj);\n            } else {\n              saveCue = message;\n            }\n\n            server = fetchAPI(\"\");\n            server.mutate({\n              mutation: sendDirectMessage,\n              variables: {\n                users: users,\n                message: saveCue,\n                channelId: props.channelId,\n                userId: user._id\n              }\n            }).then(function (res) {\n              if (res.data.message.create) {\n                props.back();\n              } else {\n                Alert(unableToPostAlert, checkConnectionAlert);\n              }\n            }).catch(function (err) {\n              Alert(somethingWentWrongAlert, checkConnectionAlert);\n            });\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [props.users, message, props.channelId, imported, type, title, url]);\n  var createThreadMessage = useCallback(function _callee3() {\n    var uString, user, saveCue, obj, server;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            console.log(\"sending message\", message);\n\n            if (message.replace(/\\&nbsp;/g, \"\").replace(/\\s/g, \"\") === \"<div></div>\") {\n              console.log(\"not possbible to add\");\n            }\n\n            if (!(!message || message === \"\" || message === \" \")) {\n              _context3.next = 4;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 4:\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"user\"));\n\n          case 6:\n            uString = _context3.sent;\n            user = JSON.parse(uString);\n            saveCue = \"\";\n\n            if (imported) {\n              obj = {\n                type: type,\n                url: url,\n                title: title\n              };\n              saveCue = JSON.stringify(obj);\n            } else {\n              saveCue = message;\n            }\n\n            server = fetchAPI(\"\");\n            server.mutate({\n              mutation: createMessage,\n              variables: {\n                message: saveCue,\n                userId: user._id,\n                channelId: channelId,\n                isPrivate: isPrivate,\n                anonymous: anonymous,\n                cueId: cueId === null ? \"NULL\" : cueId,\n                parentId: parentId === null ? \"INIT\" : parentId,\n                category: customCategory\n              }\n            }).then(function (res) {\n              if (res.data.thread.writeMessage) {\n                props.back();\n              } else {\n                Alert(unableToPostAlert, checkConnectionAlert);\n              }\n            }).catch(function (err) {\n              Alert(somethingWentWrongAlert, checkConnectionAlert);\n            });\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [message, customCategory, isPrivate, anonymous, cueId, channelId, parentId, props.back, imported, type, title, url]);\n  useEffect(function () {\n    if (!props.users) {\n      loadCategories();\n    }\n  }, [props.users]);\n  return React.createElement(View, {\n    style: {\n      width: \"100%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }\n  }, parentId || props.users ? null : React.createElement(View, {\n    style: {\n      width: \"100%\",\n      backgroundColor: \"white\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      paddingBottom: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, React.createElement(TouchableOpacity, {\n    key: Math.random(),\n    style: {\n      backgroundColor: \"white\"\n    },\n    onPress: function onPress() {\n      return props.back();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      width: \"100%\",\n      lineHeight: 23\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, React.createElement(Ionicons, {\n    name: \"chevron-back-outline\",\n    size: 23,\n    color: \"#202025\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  })))), React.createElement(View, {\n    style: styles.date,\n    onTouchStart: function onTouchStart() {\n      return Keyboard.dismiss();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#a2a2aa\",\n      fontSize: 11,\n      lineHeight: 30,\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, now.toString().split(\" \")[1] + \" \" + now.toString().split(\" \")[2] + \", \" + now.toString().split(\" \")[3]), showImportOptions && !imported ? null : React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      if (imported) {\n        setMessage(\"\");\n        setTitle(\"\");\n        setUrl(\"\");\n        setType(\"\");\n      }\n\n      setShowImportOptions(!showImportOptions);\n    },\n    style: {\n      alignSelf: \"flex-end\",\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#a2a2aa\",\n      fontSize: 11,\n      lineHeight: 30,\n      textAlign: \"right\",\n      paddingRight: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, imported ? \"CLEAR\" : \"IMPORT\"))), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      paddingVertical: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }\n  }, showImportOptions && !imported ? React.createElement(FileUpload, {\n    action: \"send\",\n    back: function back() {\n      return setShowImportOptions(false);\n    },\n    onUpload: function onUpload(u, t) {\n      console.log(t);\n      var obj = {\n        url: u,\n        type: t,\n        title: title\n      };\n      setMessage(JSON.stringify(obj));\n      setShowImportOptions(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }) : null), imported ? React.createElement(View, {\n    style: {\n      backgroundColor: \"white\",\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      width: \"40%\",\n      alignSelf: \"flex-start\",\n      marginLeft: \"10%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, React.createElement(TextInput, {\n    value: title,\n    style: styles.input,\n    placeholder: \"Title\",\n    onChangeText: function onChangeText(val) {\n      return setTitle(val);\n    },\n    placeholderTextColor: \"#a2a2aa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  })), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      width: \"100%\",\n      color: \"#a2a2aa\",\n      fontSize: 22,\n      paddingVertical: 50,\n      marginLeft: \"10%\",\n      paddingHorizontal: 5,\n      fontFamily: \"inter\",\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }\n  }, React.createElement(Ionicons, {\n    name: \"document-outline\",\n    size: 50,\n    color: \"#a2a2aa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 15\n    }\n  })))) : React.createElement(View, {\n    style: {\n      width: \"100%\",\n      minHeight: 100,\n      maxWidth: 500,\n      backgroundColor: \"white\",\n      paddingBottom: 5\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 9\n    }\n  }, React.createElement(RichEditor, {\n    disabled: false,\n    containerStyle: {\n      backgroundColor: \"#f4f4f6\",\n      borderRadius: 15,\n      padding: 3,\n      paddingTop: 5,\n      paddingBottom: 10,\n      minHeight: 100\n    },\n    ref: RichText,\n    style: {\n      width: \"100%\",\n      backgroundColor: \"#f4f4f6\",\n      borderRadius: 15,\n      minHeight: 100\n    },\n    editorStyle: {\n      backgroundColor: \"#f4f4f6\",\n      placeholderColor: \"#a2a2aa\",\n      color: \"#202025\",\n      contentCSSText: \"font-size: 13px;\"\n    },\n    initialContentHTML: props.message,\n    onScroll: function onScroll() {\n      return Keyboard.dismiss();\n    },\n    placeholder: props.placeholder,\n    onChange: function onChange(text) {\n      var modifedText = text.split(\"&amp;\").join(\"&\");\n      setMessage(modifedText);\n    },\n    onBlur: function onBlur() {\n      return Keyboard.dismiss();\n    },\n    allowFileAccess: true,\n    allowFileAccessFromFileURLs: true,\n    allowUniversalAccessFromFileURLs: true,\n    allowsFullscreenVideo: true,\n    allowsInlineMediaPlayback: true,\n    allowsLinkPreview: true,\n    allowsBackForwardNavigationGestures: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 11\n    }\n  })), props.users ? null : React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 9\n    }\n  }, !cueId && !parentId ? React.createElement(View, {\n    style: {\n      width: \"33.33%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      width: \"100%\",\n      paddingTop: 40,\n      paddingBottom: 10,\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 12,\n      color: \"#a2a2aa\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 17\n    }\n  }, PreferredLanguageText(\"category\"))), React.createElement(View, {\n    style: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 15\n    }\n  }, React.createElement(View, {\n    style: {\n      width: \"85%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 17\n    }\n  }, addCustomCategory ? React.createElement(View, {\n    style: styles.colorBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 21\n    }\n  }, React.createElement(TextInput, {\n    value: customCategory,\n    style: styles.allOutline,\n    placeholder: \"Enter Category\",\n    onChangeText: function onChangeText(val) {\n      setCustomCategory(val);\n    },\n    placeholderTextColor: \"#a2a2aa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 23\n    }\n  })) : React.createElement(ScrollView, {\n    style: styles.colorBar,\n    horizontal: true,\n    showsHorizontalScrollIndicator: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 21\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: customCategory === \"\" ? styles.allOutline : styles.all,\n    onPress: function onPress() {\n      setCustomCategory(\"\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 23\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#a2a2aa\",\n      lineHeight: 20,\n      fontSize: 12\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 25\n    }\n  }, PreferredLanguageText(\"none\"))), categories.map(function (category) {\n    return React.createElement(TouchableOpacity, {\n      key: Math.random(),\n      style: category === customCategory ? styles.allOutline : styles.all,\n      onPress: function onPress() {\n        setCustomCategory(category);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 27\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#a2a2aa\",\n        lineHeight: 20,\n        fontSize: 12\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 29\n      }\n    }, category));\n  }))), React.createElement(View, {\n    style: {\n      width: \"15%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 17\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      if (addCustomCategory) {\n        setCustomCategory(\"\");\n        setAddCustomCategory(false);\n      } else {\n        setCustomCategory(\"\");\n        setAddCustomCategory(true);\n      }\n    },\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: \"right\",\n      lineHeight: 20,\n      width: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 21\n    }\n  }, React.createElement(Ionicons, {\n    name: addCustomCategory ? \"close\" : \"add\",\n    size: 20,\n    color: \"#a2a2aa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 23\n    }\n  })))))) : null, React.createElement(View, {\n    style: {\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 11\n    }\n  }, parentId ? null : parentId ? null : React.createElement(View, {\n    style: {\n      width: \"33.33%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 15\n    }\n  }, React.createElement(View, {\n    style: {\n      width: \"100%\",\n      paddingTop: 40,\n      paddingBottom: 10,\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 12,\n      color: \"#a2a2aa\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 19\n    }\n  }, PreferredLanguageText(\"private\"))), React.createElement(Switch, {\n    value: isPrivate,\n    onValueChange: function onValueChange() {\n      return setIsPrivate(!isPrivate);\n    },\n    trackColor: {\n      false: \"#f4f4f6\",\n      true: \"#a2a2aa\"\n    },\n    style: {\n      height: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 17\n    }\n  })))), React.createElement(View, {\n    style: styles.footer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      maxWidth: 500,\n      backgroundColor: \"white\",\n      justifyContent: \"center\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      height: 50,\n      paddingTop: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 9\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      if (props.users) {\n        createDirectMessage();\n      } else {\n        createThreadMessage();\n      }\n    },\n    style: {\n      borderRadius: 15,\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: \"center\",\n      lineHeight: 35,\n      color: \"white\",\n      fontSize: 12,\n      backgroundColor: \"#3B64F8\",\n      borderRadius: 15,\n      paddingHorizontal: 25,\n      overflow: \"hidden\",\n      fontFamily: \"inter\",\n      height: 35,\n      textTransform: \"uppercase\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 13\n    }\n  }, props.users ? PreferredLanguageText(\"send\") : parentId ? PreferredLanguageText(\"reply\") : PreferredLanguageText(\"post\"))))));\n};\n\nexport default NewMessage;\nvar styles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    backgroundColor: \"white\"\n  },\n  footer: {\n    width: \"100%\",\n    backgroundColor: \"white\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    marginTop: 80,\n    lineHeight: 18,\n    marginBottom: 25\n  },\n  date: {\n    width: \"100%\",\n    display: \"flex\",\n    maxWidth: 500,\n    flexDirection: \"row\",\n    paddingBottom: 4,\n    backgroundColor: \"white\"\n  },\n  colorBar: {\n    width: \"100%\",\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    lineHeight: 20\n  },\n  col1: {\n    width: \"50%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    backgroundColor: \"white\",\n    paddingRight: 7.5\n  },\n  col2: {\n    width: \"50%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    backgroundColor: \"white\",\n    paddingLeft: 7.5\n  },\n  text: {\n    fontSize: 12,\n    color: \"#a2a2aa\",\n    textAlign: \"left\"\n  },\n  input: {\n    width: \"100%\",\n    borderBottomColor: \"#f4f4f6\",\n    borderBottomWidth: 1,\n    fontSize: 12,\n    padding: 15,\n    paddingTop: 12,\n    paddingBottom: 12,\n    marginTop: 5,\n    marginBottom: 20\n  },\n  all: {\n    fontSize: 12,\n    color: \"#a2a2aa\",\n    height: 20,\n    paddingHorizontal: 10,\n    backgroundColor: \"white\"\n  },\n  allOutline: {\n    fontSize: 12,\n    color: \"#a2a2aa\",\n    height: 22,\n    paddingHorizontal: 10,\n    backgroundColor: \"white\",\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: \"#a2a2aa\"\n  },\n  outline: {\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: \"#a2a2aa\"\n  }\n});","map":{"version":3,"sources":["D:/p_projects/highlights-web/components/NewMessage.tsx"],"names":["React","useCallback","useEffect","useRef","useState","Alert","Text","View","TouchableOpacity","Ionicons","fetchAPI","getThreadCategories","createMessage","sendDirectMessage","AsyncStorage","RichEditor","FileUpload","PreferredLanguageText","NewMessage","props","message","setMessage","isPrivate","setIsPrivate","anonymous","setAnonymous","customCategory","setCustomCategory","categories","setCategories","RichText","addCustomCategory","setAddCustomCategory","channelId","cueId","parentId","now","Date","imported","setImported","url","setUrl","type","setType","title","setTitle","showImportOptions","setShowImportOptions","unableToPostAlert","somethingWentWrongAlert","checkConnectionAlert","length","obj","JSON","parse","loadCategories","undefined","server","query","variables","then","res","data","thread","getChannelThreadCategories","catch","err","createDirectMessage","getItem","u","user","users","addUserId","_id","saveCue","stringify","mutate","mutation","userId","create","back","createThreadMessage","console","log","replace","uString","category","writeMessage","width","backgroundColor","display","flexDirection","paddingBottom","Math","random","lineHeight","styles","date","Keyboard","dismiss","color","fontSize","flex","toString","split","alignSelf","textAlign","paddingRight","paddingVertical","t","marginLeft","input","val","paddingHorizontal","fontFamily","minHeight","maxWidth","borderRadius","padding","paddingTop","placeholderColor","contentCSSText","placeholder","text","modifedText","join","colorBar","allOutline","all","map","false","true","height","footer","justifyContent","overflow","textTransform","StyleSheet","container","marginTop","marginBottom","col1","col2","paddingLeft","borderBottomColor","borderBottomWidth","borderWidth","borderColor","outline"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  Keyboard,\r\n  StyleSheet,\r\n  Switch,\r\n  TextInput,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport Alert from \"../components/Alert\";\r\nimport { Text, View, TouchableOpacity } from \"./Themed\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport { fetchAPI } from \"../graphql/FetchAPI\";\r\nimport {\r\n  getThreadCategories,\r\n  createMessage,\r\n  sendDirectMessage,\r\n} from \"../graphql/QueriesAndMutations\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { RichEditor } from \"react-native-pell-rich-editor\";\r\n// import FileViewer from 'react-file-viewer';\r\nimport FileUpload from \"./UploadFiles\";\r\nimport { PreferredLanguageText } from \"../helpers/LanguageContext\";\r\n\r\nconst NewMessage: React.FunctionComponent<{ [label: string]: any }> = (\r\n  props: any\r\n) => {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [isPrivate, setIsPrivate] = useState(false);\r\n  const [anonymous, setAnonymous] = useState(false);\r\n  const [customCategory, setCustomCategory] = useState(\"\");\r\n  const [categories, setCategories] = useState([]);\r\n  let RichText: any = useRef();\r\n  const [addCustomCategory, setAddCustomCategory] = useState(false);\r\n  const [channelId] = useState<any>(props.channelId);\r\n  const [cueId] = useState<any>(props.cueId); // Null if Channel Thread. Not null if Cue Thread.\r\n  const [parentId] = useState<any>(props.parentId); //  Null if new Thread. Not null if reply.\r\n  const now = new Date();\r\n\r\n  const [imported, setImported] = useState(false);\r\n  const [url, setUrl] = useState(\"\");\r\n  const [type, setType] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n\r\n  const [showImportOptions, setShowImportOptions] = useState(false);\r\n\r\n  const unableToPostAlert = PreferredLanguageText(\"unableToPost\");\r\n  const somethingWentWrongAlert = PreferredLanguageText(\"somethingWentWrong\");\r\n  const checkConnectionAlert = PreferredLanguageText(\"checkConnection\");\r\n\r\n  useEffect(() => {\r\n    if (message[0] === \"{\" && message[message.length - 1] === \"}\") {\r\n      const obj = JSON.parse(message);\r\n      setImported(true);\r\n      setUrl(obj.url);\r\n      setType(obj.type);\r\n    } else {\r\n      setImported(false);\r\n      setUrl(\"\");\r\n      setType(\"\");\r\n      setTitle(\"\");\r\n    }\r\n  }, [message]);\r\n\r\n  const loadCategories = useCallback(async () => {\r\n    if (channelId === undefined || channelId === null || channelId === \"\") {\r\n      return;\r\n    }\r\n    const server = fetchAPI(\"\");\r\n    server\r\n      .query({\r\n        query: getThreadCategories,\r\n        variables: {\r\n          channelId,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        if (res.data.thread && res.data.thread.getChannelThreadCategories) {\r\n          setCategories(res.data.thread.getChannelThreadCategories);\r\n        }\r\n      })\r\n      .catch((err) => {});\r\n  }, [channelId]);\r\n\r\n  const createDirectMessage = useCallback(async () => {\r\n    const u = await AsyncStorage.getItem(\"user\");\r\n    if (!message || message === \"\" || !u) {\r\n      return;\r\n    }\r\n    const user = JSON.parse(u);\r\n    const users: any[] = props.addUserId\r\n      ? [user._id, ...props.users]\r\n      : props.users;\r\n    let saveCue = \"\";\r\n    if (imported) {\r\n      const obj = {\r\n        type,\r\n        url,\r\n        title,\r\n      };\r\n      saveCue = JSON.stringify(obj);\r\n    } else {\r\n      saveCue = message;\r\n    }\r\n    const server = fetchAPI(\"\");\r\n    server\r\n      .mutate({\r\n        mutation: sendDirectMessage,\r\n        variables: {\r\n          users,\r\n          message: saveCue,\r\n          channelId: props.channelId,\r\n          userId: user._id,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        if (res.data.message.create) {\r\n          props.back();\r\n        } else {\r\n          Alert(unableToPostAlert, checkConnectionAlert);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        Alert(somethingWentWrongAlert, checkConnectionAlert);\r\n      });\r\n  }, [props.users, message, props.channelId, imported, type, title, url]);\r\n\r\n  const createThreadMessage = useCallback(async () => {\r\n    console.log(\"sending message\", message);\r\n    if (message.replace(/\\&nbsp;/g, \"\").replace(/\\s/g, \"\") === \"<div></div>\") {\r\n      console.log(\"not possbible to add\");\r\n    }\r\n    if (!message || message === \"\" || message === \" \") {\r\n      return;\r\n    }\r\n    const uString: any = await AsyncStorage.getItem(\"user\");\r\n    const user = JSON.parse(uString);\r\n    let saveCue = \"\";\r\n    if (imported) {\r\n      const obj = {\r\n        type,\r\n        url,\r\n        title,\r\n      };\r\n      saveCue = JSON.stringify(obj);\r\n    } else {\r\n      saveCue = message;\r\n    }\r\n    const server = fetchAPI(\"\");\r\n    server\r\n      .mutate({\r\n        mutation: createMessage,\r\n        variables: {\r\n          message: saveCue,\r\n          userId: user._id,\r\n          channelId,\r\n          isPrivate,\r\n          anonymous,\r\n          cueId: cueId === null ? \"NULL\" : cueId,\r\n          parentId: parentId === null ? \"INIT\" : parentId,\r\n          category: customCategory,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        if (res.data.thread.writeMessage) {\r\n          props.back();\r\n        } else {\r\n          Alert(unableToPostAlert, checkConnectionAlert);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        Alert(somethingWentWrongAlert, checkConnectionAlert);\r\n      });\r\n  }, [\r\n    message,\r\n    customCategory,\r\n    isPrivate,\r\n    anonymous,\r\n    cueId,\r\n    channelId,\r\n    parentId,\r\n    props.back,\r\n    imported,\r\n    type,\r\n    title,\r\n    url,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!props.users) {\r\n      loadCategories();\r\n    }\r\n  }, [props.users]);\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        width: \"100%\",\r\n        backgroundColor: \"white\",\r\n      }}\r\n    >\r\n      {parentId || props.users ? null : (\r\n        <View\r\n          style={{\r\n            width: \"100%\",\r\n            backgroundColor: \"white\",\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            paddingBottom: 15,\r\n          }}\r\n        >\r\n          <TouchableOpacity\r\n            key={Math.random()}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n            }}\r\n            onPress={() => props.back()}\r\n          >\r\n            <Text\r\n              style={{\r\n                width: \"100%\",\r\n                lineHeight: 23,\r\n              }}\r\n            >\r\n              <Ionicons\r\n                name=\"chevron-back-outline\"\r\n                size={23}\r\n                color={\"#202025\"}\r\n              />\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      )}\r\n      <View style={styles.date} onTouchStart={() => Keyboard.dismiss()}>\r\n        <Text\r\n          style={{\r\n            color: \"#a2a2aa\",\r\n            fontSize: 11,\r\n            lineHeight: 30,\r\n            flex: 1,\r\n          }}\r\n        >\r\n          {now.toString().split(\" \")[1] +\r\n            \" \" +\r\n            now.toString().split(\" \")[2] +\r\n            \", \" +\r\n            now.toString().split(\" \")[3]}\r\n        </Text>\r\n        {showImportOptions && !imported ? null : (\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              if (imported) {\r\n                setMessage(\"\");\r\n                setTitle(\"\");\r\n                setUrl(\"\");\r\n                setType(\"\");\r\n              }\r\n              setShowImportOptions(!showImportOptions);\r\n            }}\r\n            style={{ alignSelf: \"flex-end\", flex: 1 }}\r\n          >\r\n            <Text\r\n              style={{\r\n                color: \"#a2a2aa\",\r\n                fontSize: 11,\r\n                lineHeight: 30,\r\n                textAlign: \"right\",\r\n                paddingRight: 10,\r\n              }}\r\n            >\r\n              {imported ? \"CLEAR\" : \"IMPORT\"}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        )}\r\n      </View>\r\n      <View style={{ flexDirection: \"row\", paddingVertical: 10 }}>\r\n        {showImportOptions && !imported ? (\r\n          <FileUpload\r\n            action={\"send\"}\r\n            back={() => setShowImportOptions(false)}\r\n            onUpload={(u: any, t: any) => {\r\n              console.log(t);\r\n              const obj = { url: u, type: t, title };\r\n              setMessage(JSON.stringify(obj));\r\n              setShowImportOptions(false);\r\n            }}\r\n          />\r\n        ) : null}\r\n      </View>\r\n      {imported ? (\r\n        <View style={{ backgroundColor: \"white\", flex: 1 }}>\r\n          <View\r\n            style={{ width: \"40%\", alignSelf: \"flex-start\", marginLeft: \"10%\" }}\r\n          >\r\n            <TextInput\r\n              value={title}\r\n              style={styles.input}\r\n              placeholder={\"Title\"}\r\n              onChangeText={(val) => setTitle(val)}\r\n              placeholderTextColor={\"#a2a2aa\"}\r\n            />\r\n          </View>\r\n          <View>\r\n            <Text\r\n              style={{\r\n                width: \"100%\",\r\n                color: \"#a2a2aa\",\r\n                fontSize: 22,\r\n                paddingVertical: 50,\r\n                marginLeft: \"10%\",\r\n                paddingHorizontal: 5,\r\n                fontFamily: \"inter\",\r\n                flex: 1,\r\n              }}\r\n            >\r\n              <Ionicons name=\"document-outline\" size={50} color=\"#a2a2aa\" />\r\n            </Text>\r\n          </View>\r\n        </View>\r\n      ) : (\r\n        <View\r\n          style={{\r\n            width: \"100%\",\r\n            minHeight: 100,\r\n            maxWidth: 500,\r\n            backgroundColor: \"white\",\r\n            paddingBottom: 5,\r\n          }}\r\n        >\r\n          <RichEditor\r\n            disabled={false}\r\n            containerStyle={{\r\n              backgroundColor: \"#f4f4f6\",\r\n              borderRadius: 15,\r\n              padding: 3,\r\n              paddingTop: 5,\r\n              paddingBottom: 10,\r\n              minHeight: 100,\r\n            }}\r\n            ref={RichText}\r\n            style={{\r\n              width: \"100%\",\r\n              backgroundColor: \"#f4f4f6\",\r\n              borderRadius: 15,\r\n              minHeight: 100,\r\n            }}\r\n            editorStyle={{\r\n              backgroundColor: \"#f4f4f6\",\r\n              placeholderColor: \"#a2a2aa\",\r\n              color: \"#202025\",\r\n              contentCSSText: \"font-size: 13px;\",\r\n            }}\r\n            initialContentHTML={props.message}\r\n            onScroll={() => Keyboard.dismiss()}\r\n            placeholder={props.placeholder}\r\n            onChange={(text) => {\r\n              const modifedText = text.split(\"&amp;\").join(\"&\");\r\n\r\n              setMessage(modifedText);\r\n            }}\r\n            onBlur={() => Keyboard.dismiss()}\r\n            allowFileAccess={true}\r\n            allowFileAccessFromFileURLs={true}\r\n            allowUniversalAccessFromFileURLs={true}\r\n            allowsFullscreenVideo={true}\r\n            allowsInlineMediaPlayback={true}\r\n            allowsLinkPreview={true}\r\n            allowsBackForwardNavigationGestures={true}\r\n          />\r\n        </View>\r\n      )}\r\n      {props.users ? null : (\r\n        <View>\r\n          {!cueId && !parentId ? (\r\n            <View style={{ width: \"33.33%\", backgroundColor: \"white\" }}>\r\n              <View\r\n                style={{\r\n                  width: \"100%\",\r\n                  paddingTop: 40,\r\n                  paddingBottom: 10,\r\n                  backgroundColor: \"white\",\r\n                }}\r\n              >\r\n                <Text style={{ fontSize: 12, color: \"#a2a2aa\" }}>\r\n                  {PreferredLanguageText(\"category\")}\r\n                </Text>\r\n              </View>\r\n              <View\r\n                style={{\r\n                  width: \"100%\",\r\n                  display: \"flex\",\r\n                  flexDirection: \"row\",\r\n                  backgroundColor: \"white\",\r\n                }}\r\n              >\r\n                <View style={{ width: \"85%\", backgroundColor: \"white\" }}>\r\n                  {addCustomCategory ? (\r\n                    <View style={styles.colorBar}>\r\n                      <TextInput\r\n                        value={customCategory}\r\n                        style={styles.allOutline}\r\n                        placeholder={\"Enter Category\"}\r\n                        onChangeText={(val) => {\r\n                          setCustomCategory(val);\r\n                        }}\r\n                        placeholderTextColor={\"#a2a2aa\"}\r\n                      />\r\n                    </View>\r\n                  ) : (\r\n                    <ScrollView\r\n                      style={styles.colorBar}\r\n                      horizontal={true}\r\n                      showsHorizontalScrollIndicator={false}\r\n                    >\r\n                      <TouchableOpacity\r\n                        style={\r\n                          customCategory === \"\" ? styles.allOutline : styles.all\r\n                        }\r\n                        onPress={() => {\r\n                          setCustomCategory(\"\");\r\n                        }}\r\n                      >\r\n                        <Text\r\n                          style={{\r\n                            color: \"#a2a2aa\",\r\n                            lineHeight: 20,\r\n                            fontSize: 12,\r\n                          }}\r\n                        >\r\n                          {PreferredLanguageText(\"none\")}\r\n                        </Text>\r\n                      </TouchableOpacity>\r\n                      {categories.map((category) => {\r\n                        return (\r\n                          <TouchableOpacity\r\n                            key={Math.random()}\r\n                            style={\r\n                              category === customCategory\r\n                                ? styles.allOutline\r\n                                : styles.all\r\n                            }\r\n                            onPress={() => {\r\n                              setCustomCategory(category);\r\n                            }}\r\n                          >\r\n                            <Text\r\n                              style={{\r\n                                color: \"#a2a2aa\",\r\n                                lineHeight: 20,\r\n                                fontSize: 12,\r\n                              }}\r\n                            >\r\n                              {category}\r\n                            </Text>\r\n                          </TouchableOpacity>\r\n                        );\r\n                      })}\r\n                    </ScrollView>\r\n                  )}\r\n                </View>\r\n                <View style={{ width: \"15%\", backgroundColor: \"white\" }}>\r\n                  <TouchableOpacity\r\n                    onPress={() => {\r\n                      if (addCustomCategory) {\r\n                        setCustomCategory(\"\");\r\n                        setAddCustomCategory(false);\r\n                      } else {\r\n                        setCustomCategory(\"\");\r\n                        setAddCustomCategory(true);\r\n                      }\r\n                    }}\r\n                    style={{ backgroundColor: \"white\" }}\r\n                  >\r\n                    <Text\r\n                      style={{\r\n                        textAlign: \"right\",\r\n                        lineHeight: 20,\r\n                        width: \"100%\",\r\n                      }}\r\n                    >\r\n                      <Ionicons\r\n                        name={addCustomCategory ? \"close\" : \"add\"}\r\n                        size={20}\r\n                        color={\"#a2a2aa\"}\r\n                      />\r\n                    </Text>\r\n                  </TouchableOpacity>\r\n                </View>\r\n              </View>\r\n            </View>\r\n          ) : null}\r\n          <View style={{ flexDirection: \"row\" }}>\r\n            {/* <View style={{ width: '33.33%', backgroundColor: 'white' }}>\r\n                                <View style={{ width: '100%', paddingTop: 40, paddingBottom: 10, backgroundColor: 'white' }}>\r\n                                    <Text style={{ fontSize: 12, color: '#a2a2aa' }}>\r\n                                        {PreferredLanguageText('anonymous')}\r\n                                    </Text>\r\n                                </View>\r\n                                <Switch\r\n                                    value={anonymous}\r\n                                    onValueChange={() => setAnonymous(!anonymous)}\r\n                                    trackColor={{\r\n                                        false: '#f4f4f6',\r\n                                        true: '#a2a2aa'\r\n                                    }}\r\n                                    activeThumbColor='white'\r\n                                    style={{ height: 20 }}\r\n                                />\r\n                            </View> */}\r\n            {parentId ? null : parentId ? null : (\r\n              <View style={{ width: \"33.33%\", backgroundColor: \"white\" }}>\r\n                <View\r\n                  style={{\r\n                    width: \"100%\",\r\n                    paddingTop: 40,\r\n                    paddingBottom: 10,\r\n                    backgroundColor: \"white\",\r\n                  }}\r\n                >\r\n                  <Text style={{ fontSize: 12, color: \"#a2a2aa\" }}>\r\n                    {PreferredLanguageText(\"private\")}\r\n                  </Text>\r\n                </View>\r\n                <Switch\r\n                  value={isPrivate}\r\n                  onValueChange={() => setIsPrivate(!isPrivate)}\r\n                  trackColor={{\r\n                    false: \"#f4f4f6\",\r\n                    true: \"#a2a2aa\",\r\n                  }}\r\n                  // activeThumbColor='white'\r\n                  style={{ height: 20 }}\r\n                />\r\n              </View>\r\n            )}\r\n          </View>\r\n        </View>\r\n      )}\r\n      <View style={styles.footer}>\r\n        <View\r\n          style={{\r\n            flex: 1,\r\n            maxWidth: 500,\r\n            backgroundColor: \"white\",\r\n            justifyContent: \"center\",\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            height: 50,\r\n            paddingTop: 10,\r\n          }}\r\n        >\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              if (props.users) {\r\n                createDirectMessage();\r\n              } else {\r\n                createThreadMessage();\r\n              }\r\n            }}\r\n            style={{\r\n              borderRadius: 15,\r\n              backgroundColor: \"white\",\r\n            }}\r\n          >\r\n            <Text\r\n              style={{\r\n                textAlign: \"center\",\r\n                lineHeight: 35,\r\n                color: \"white\",\r\n                fontSize: 12,\r\n                backgroundColor: \"#3B64F8\",\r\n                borderRadius: 15,\r\n                paddingHorizontal: 25,\r\n                overflow: \"hidden\",\r\n                fontFamily: \"inter\",\r\n                height: 35,\r\n                textTransform: \"uppercase\",\r\n              }}\r\n            >\r\n              {props.users\r\n                ? PreferredLanguageText(\"send\")\r\n                : parentId\r\n                ? PreferredLanguageText(\"reply\")\r\n                : PreferredLanguageText(\"post\")}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default NewMessage;\r\n\r\nconst styles: any = StyleSheet.create({\r\n  container: {\r\n    width: \"100%\",\r\n    backgroundColor: \"white\",\r\n  },\r\n  footer: {\r\n    width: \"100%\",\r\n    backgroundColor: \"white\",\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    marginTop: 80,\r\n    lineHeight: 18,\r\n    marginBottom: 25,\r\n  },\r\n  date: {\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    maxWidth: 500,\r\n    flexDirection: \"row\",\r\n    paddingBottom: 4,\r\n    backgroundColor: \"white\",\r\n  },\r\n  colorBar: {\r\n    width: \"100%\",\r\n    flexDirection: \"row\",\r\n    backgroundColor: \"white\",\r\n    lineHeight: 20,\r\n  },\r\n  col1: {\r\n    width: \"50%\",\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"white\",\r\n    paddingRight: 7.5,\r\n  },\r\n  col2: {\r\n    width: \"50%\",\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"white\",\r\n    paddingLeft: 7.5,\r\n  },\r\n  text: {\r\n    fontSize: 12,\r\n    color: \"#a2a2aa\",\r\n    textAlign: \"left\",\r\n  },\r\n  input: {\r\n    width: \"100%\",\r\n    borderBottomColor: \"#f4f4f6\",\r\n    borderBottomWidth: 1,\r\n    fontSize: 12,\r\n    padding: 15,\r\n    paddingTop: 12,\r\n    paddingBottom: 12,\r\n    marginTop: 5,\r\n    marginBottom: 20,\r\n  },\r\n  all: {\r\n    fontSize: 12,\r\n    color: \"#a2a2aa\",\r\n    height: 20,\r\n    paddingHorizontal: 10,\r\n    backgroundColor: \"white\",\r\n  },\r\n  allOutline: {\r\n    fontSize: 12,\r\n    color: \"#a2a2aa\",\r\n    height: 22,\r\n    paddingHorizontal: 10,\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#a2a2aa\",\r\n  },\r\n  outline: {\r\n    borderRadius: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#a2a2aa\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}