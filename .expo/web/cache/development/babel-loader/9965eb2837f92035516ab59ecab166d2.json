{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\p_projects\\\\highlights-web\\\\node_modules\\\\react-native-pell-rich-editor\\\\src\\\\RichToolbar.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { actions } from \"./const\";\nexport var defaultActions = [actions.keyboard, actions.setBold, actions.setItalic, actions.setUnderline, actions.removeFormat, actions.insertBulletsList, actions.indent, actions.outdent, actions.insertLink];\n\nfunction getDefaultIcon() {\n  var texts = {};\n  texts[actions.insertImage] = require(\"../img/image@2x.png\");\n  texts[actions.keyboard] = require(\"../img/keyboard@2x.png\");\n  texts[actions.setBold] = require(\"../img/bold@2x.png\");\n  texts[actions.setItalic] = require(\"../img/italic@2x.png\");\n  texts[actions.insertBulletsList] = require(\"../img/ul@2x.png\");\n  texts[actions.insertOrderedList] = require(\"../img/ol@2x.png\");\n  texts[actions.insertLink] = require(\"../img/link@2x.png\");\n  texts[actions.setStrikethrough] = require(\"../img/strikethrough@2x.png\");\n  texts[actions.setUnderline] = require(\"../img/underline@2x.png\");\n  texts[actions.insertVideo] = require(\"../img/video@2x.png\");\n  texts[actions.removeFormat] = require(\"../img/remove_format@2x.png\");\n  texts[actions.undo] = require(\"../img/undo@2x.png\");\n  texts[actions.redo] = require(\"../img/redo@2x.png\");\n  texts[actions.checkboxList] = require(\"../img/checkbox@2x.png\");\n  texts[actions.table] = require(\"../img/table@2x.png\");\n  texts[actions.code] = require(\"../img/code@2x.png\");\n  texts[actions.outdent] = require(\"../img/outdent@2x.png\");\n  texts[actions.indent] = require(\"../img/indent@2x.png\");\n  texts[actions.alignLeft] = require(\"../img/justify_left@2x.png\");\n  texts[actions.alignCenter] = require(\"../img/justify_center@2x.png\");\n  texts[actions.alignRight] = require(\"../img/justify_right@2x.png\");\n  texts[actions.alignFull] = require(\"../img/justify_full@2x.png\");\n  texts[actions.blockquote] = require(\"../img/blockquote@2x.png\");\n  texts[actions.line] = require(\"../img/line@2x.png\");\n  texts[actions.fontSize] = require(\"../img/fontSize@2x.png\");\n  return texts;\n}\n\nvar RichToolbar = function (_Component) {\n  _inherits(RichToolbar, _Component);\n\n  var _super = _createSuper(RichToolbar);\n\n  function RichToolbar(props) {\n    var _this;\n\n    _classCallCheck(this, RichToolbar);\n\n    _this = _super.call(this, props);\n\n    _this._mount = function () {\n      var _this$props$editor = _this.props.editor;\n      _this$props$editor = _this$props$editor === void 0 ? {\n        current: _this.props.getEditor == null ? void 0 : _this.props.getEditor()\n      } : _this$props$editor;\n      var editor = _this$props$editor.current;\n\n      if (!editor) {\n        throw new Error('Toolbar has no editor!');\n      } else {\n        editor.registerToolbar(function (selectedItems) {\n          return _this.setSelectedItems(selectedItems);\n        });\n        _this.editor = editor;\n      }\n    };\n\n    _this.editor = null;\n    _this.state = {\n      items: []\n    };\n    return _this;\n  }\n\n  _createClass(RichToolbar, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var that = this;\n      return nextState.items !== that.state.items || nextState.actions !== that.state.actions || nextState.data !== that.state.data || nextProps.style !== that.props.style;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      setTimeout(this._mount);\n    }\n  }, {\n    key: \"setSelectedItems\",\n    value: function setSelectedItems(items) {\n      var selectedItems = this.state.items;\n\n      if (this.editor && items !== selectedItems) {\n        this.setState({\n          items: items,\n          data: this.state.actions.map(function (action) {\n            return {\n              action: action,\n              selected: items.includes(action)\n            };\n          })\n        });\n      }\n    }\n  }, {\n    key: \"_getButtonSelectedStyle\",\n    value: function _getButtonSelectedStyle() {\n      return this.props.selectedButtonStyle && this.props.selectedButtonStyle;\n    }\n  }, {\n    key: \"_getButtonUnselectedStyle\",\n    value: function _getButtonUnselectedStyle() {\n      return this.props.unselectedButtonStyle && this.props.unselectedButtonStyle;\n    }\n  }, {\n    key: \"_getButtonDisabledStyle\",\n    value: function _getButtonDisabledStyle() {\n      return this.props.disabledButtonStyle && this.props.disabledButtonStyle;\n    }\n  }, {\n    key: \"_getButtonIcon\",\n    value: function _getButtonIcon(action) {\n      var iconMap = this.props.iconMap;\n\n      if (iconMap && iconMap[action]) {\n        return iconMap[action];\n      } else {\n        return getDefaultIcon()[action];\n      }\n    }\n  }, {\n    key: \"handleKeyboard\",\n    value: function handleKeyboard() {\n      var editor = this.editor;\n      if (!editor) return;\n\n      if (editor.isKeyboardOpen) {\n        editor.dismissKeyboard();\n      } else {\n        editor.focusContentEditor();\n      }\n    }\n  }, {\n    key: \"_onPress\",\n    value: function _onPress(action) {\n      var _this$props = this.props,\n          onPressAddImage = _this$props.onPressAddImage,\n          onInsertLink = _this$props.onInsertLink,\n          insertVideo = _this$props.insertVideo;\n      var editor = this.editor;\n      if (!editor) return;\n\n      switch (action) {\n        case actions.insertLink:\n          if (onInsertLink) return onInsertLink();\n\n        case actions.setBold:\n        case actions.setItalic:\n        case actions.undo:\n        case actions.redo:\n        case actions.insertBulletsList:\n        case actions.insertOrderedList:\n        case actions.checkboxList:\n        case actions.setUnderline:\n        case actions.heading1:\n        case actions.heading2:\n        case actions.heading3:\n        case actions.heading4:\n        case actions.heading5:\n        case actions.heading6:\n        case actions.code:\n        case actions.blockquote:\n        case actions.line:\n        case actions.setParagraph:\n        case actions.removeFormat:\n        case actions.alignLeft:\n        case actions.alignCenter:\n        case actions.alignRight:\n        case actions.alignFull:\n        case actions.setSubscript:\n        case actions.setSuperscript:\n        case actions.setStrikethrough:\n        case actions.setHR:\n        case actions.indent:\n        case actions.outdent:\n          editor.showAndroidKeyboard();\n          editor.sendAction(action, 'result');\n          break;\n\n        case actions.insertImage:\n          onPressAddImage && onPressAddImage();\n          break;\n\n        case actions.insertVideo:\n          insertVideo && insertVideo();\n          break;\n\n        case actions.keyboard:\n          this.handleKeyboard();\n          break;\n\n        default:\n          this.props[action] && this.props[action]();\n          break;\n      }\n    }\n  }, {\n    key: \"_defaultRenderAction\",\n    value: function _defaultRenderAction(action, selected) {\n      var that = this;\n\n      var icon = that._getButtonIcon(action);\n\n      var _that$props = that.props,\n          iconSize = _that$props.iconSize,\n          iconGap = _that$props.iconGap,\n          disabled = _that$props.disabled,\n          itemStyle = _that$props.itemStyle;\n      var style = selected ? that._getButtonSelectedStyle() : that._getButtonUnselectedStyle();\n      var tintColor = disabled ? that.props.disabledIconTint : selected ? that.props.selectedIconTint : that.props.iconTint;\n      return React.createElement(TouchableOpacity, {\n        key: action,\n        disabled: disabled,\n        style: [{\n          width: iconGap + iconSize\n        }, styles.item, itemStyle, style],\n        onPress: function onPress() {\n          return that._onPress(action);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 7\n        }\n      }, icon ? typeof icon === 'function' ? icon({\n        selected: selected,\n        disabled: disabled,\n        tintColor: tintColor,\n        iconSize: iconSize,\n        iconGap: iconGap\n      }) : React.createElement(Image, {\n        source: icon,\n        style: {\n          tintColor: tintColor,\n          height: iconSize,\n          width: iconSize\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }\n      }) : null);\n    }\n  }, {\n    key: \"_renderAction\",\n    value: function _renderAction(action, selected) {\n      return this.props.renderAction ? this.props.renderAction(action, selected) : this._defaultRenderAction(action, selected);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          style = _this$props2.style,\n          disabled = _this$props2.disabled,\n          children = _this$props2.children,\n          flatContainerStyle = _this$props2.flatContainerStyle;\n      var vStyle = [styles.barContainer, style, disabled && this._getButtonDisabledStyle()];\n      return React.createElement(View, {\n        style: vStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 7\n        }\n      }, React.createElement(FlatList, {\n        horizontal: true,\n        keyboardShouldPersistTaps: 'always',\n        keyExtractor: function keyExtractor(item, index) {\n          return item.action + '-' + index;\n        },\n        data: this.state.data,\n        alwaysBounceHorizontal: false,\n        showsHorizontalScrollIndicator: false,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return _this2._renderAction(item.action, item.selected);\n        },\n        contentContainerStyle: flatContainerStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 9\n        }\n      }), children);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var actions = nextProps.actions;\n\n      if (actions !== prevState.actions) {\n        var _prevState$items = prevState.items,\n            items = _prevState$items === void 0 ? [] : _prevState$items;\n        return {\n          actions: actions,\n          data: actions.map(function (action) {\n            return {\n              action: action,\n              selected: items.includes(action)\n            };\n          })\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return RichToolbar;\n}(Component);\n\nRichToolbar.defaultProps = {\n  actions: defaultActions,\n  disabled: false,\n  iconTint: '#71787F',\n  iconSize: 20,\n  iconGap: 16\n};\nexport { RichToolbar as default };\nvar styles = StyleSheet.create({\n  barContainer: {\n    height: 44,\n    backgroundColor: '#efefef',\n    alignItems: 'center'\n  },\n  item: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"sources":["D:/p_projects/highlights-web/node_modules/react-native-pell-rich-editor/src/RichToolbar.js"],"names":["React","Component","actions","defaultActions","keyboard","setBold","setItalic","setUnderline","removeFormat","insertBulletsList","indent","outdent","insertLink","getDefaultIcon","texts","insertImage","require","insertOrderedList","setStrikethrough","insertVideo","undo","redo","checkboxList","table","code","alignLeft","alignCenter","alignRight","alignFull","blockquote","line","fontSize","RichToolbar","props","_mount","editor","current","getEditor","Error","registerToolbar","selectedItems","setSelectedItems","state","items","nextProps","nextState","that","data","style","setTimeout","setState","map","action","selected","includes","selectedButtonStyle","unselectedButtonStyle","disabledButtonStyle","iconMap","isKeyboardOpen","dismissKeyboard","focusContentEditor","onPressAddImage","onInsertLink","heading1","heading2","heading3","heading4","heading5","heading6","setParagraph","setSubscript","setSuperscript","setHR","showAndroidKeyboard","sendAction","handleKeyboard","icon","_getButtonIcon","iconSize","iconGap","disabled","itemStyle","_getButtonSelectedStyle","_getButtonUnselectedStyle","tintColor","disabledIconTint","selectedIconTint","iconTint","width","styles","item","_onPress","height","renderAction","_defaultRenderAction","children","flatContainerStyle","vStyle","barContainer","_getButtonDisabledStyle","index","_renderAction","prevState","defaultProps","StyleSheet","create","backgroundColor","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {\n  FlatList,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport {actions} from './const';\n\nexport const defaultActions = [\n  actions.keyboard,\n  actions.setBold,\n  actions.setItalic,\n  actions.setUnderline,\n  actions.removeFormat,\n  actions.insertBulletsList,\n  actions.indent,\n  actions.outdent,\n  actions.insertLink,\n];\n\nfunction getDefaultIcon() {\n  const texts = {};\n  // new icon styles of experiment\n  texts[actions.insertImage] = require('../img/image@2x.png');\n  texts[actions.keyboard] = require('../img/keyboard@2x.png');\n  texts[actions.setBold] = require('../img/bold@2x.png');\n  texts[actions.setItalic] = require('../img/italic@2x.png');\n  texts[actions.insertBulletsList] = require('../img/ul@2x.png');\n  texts[actions.insertOrderedList] = require('../img/ol@2x.png');\n  texts[actions.insertLink] = require('../img/link@2x.png');\n  texts[actions.setStrikethrough] = require('../img/strikethrough@2x.png');\n  texts[actions.setUnderline] = require('../img/underline@2x.png');\n  texts[actions.insertVideo] = require('../img/video@2x.png');\n  texts[actions.removeFormat] = require('../img/remove_format@2x.png');\n  texts[actions.undo] = require('../img/undo@2x.png');\n  texts[actions.redo] = require('../img/redo@2x.png');\n  texts[actions.checkboxList] = require('../img/checkbox@2x.png');\n  texts[actions.table] = require('../img/table@2x.png');\n  texts[actions.code] = require('../img/code@2x.png');\n  texts[actions.outdent] = require('../img/outdent@2x.png');\n  texts[actions.indent] = require('../img/indent@2x.png');\n  texts[actions.alignLeft] = require('../img/justify_left@2x.png');\n  texts[actions.alignCenter] = require('../img/justify_center@2x.png');\n  texts[actions.alignRight] = require('../img/justify_right@2x.png');\n  texts[actions.alignFull] = require('../img/justify_full@2x.png');\n  texts[actions.blockquote] = require('../img/blockquote@2x.png');\n  texts[actions.line] = require('../img/line@2x.png');\n  texts[actions.fontSize] = require('../img/fontSize@2x.png');\n  return texts;\n}\n\n// noinspection FallThroughInSwitchStatementJS\nexport default class RichToolbar extends Component {\n  // static propTypes = {\n  //   getEditor?: PropTypes.func.isRequired,\n  //   editor?: PropTypes.object,\n  //   actions: PropTypes.array,\n  //   onPressAddImage: PropTypes.func,\n  //   onInsertLink: PropTypes.func,\n  //   selectedButtonStyle: PropTypes.object,\n  //   itemStyle: PropTypes.object,\n  //   iconTint: PropTypes.any,\n  //   selectedIconTint: PropTypes.any,\n  //   unselectedButtonStyle: PropTypes.object,\n  //   disabledButtonStyle: PropTypes.object,\n  //   disabledIconTint: PropTypes.any,\n  //   renderAction: PropTypes.func,\n  //   iconMap: PropTypes.object,\n  //   disabled: PropTypes.bool,\n  // };\n\n  static defaultProps = {\n    actions: defaultActions,\n    disabled: false,\n    iconTint: '#71787F',\n    iconSize: 20,\n    iconGap: 16,\n  };\n\n  constructor(props) {\n    super(props);\n    this.editor = null;\n    this.state = {\n      items: [],\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    let that = this;\n    return (\n      nextState.items !== that.state.items ||\n      nextState.actions !== that.state.actions ||\n      nextState.data !== that.state.data ||\n      nextProps.style !== that.props.style\n    );\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const {actions} = nextProps;\n    if (actions !== prevState.actions) {\n      let {items = []} = prevState;\n      return {\n        actions,\n        data: actions.map((action) => ({\n          action,\n          selected: items.includes(action),\n        })),\n      };\n    }\n    return null;\n  }\n\n  componentDidMount() {\n    setTimeout(this._mount);\n  }\n\n  _mount = () => {\n    const {editor: {current: editor} = {current: this.props.getEditor?.()}} =\n      this.props;\n    if (!editor) {\n      throw new Error('Toolbar has no editor!');\n    } else {\n      editor.registerToolbar((selectedItems) =>\n        this.setSelectedItems(selectedItems),\n      );\n      this.editor = editor;\n    }\n  };\n\n  setSelectedItems(items) {\n    const {items: selectedItems} = this.state;\n    if (this.editor && items !== selectedItems) {\n      this.setState({\n        items,\n        data: this.state.actions.map((action) => ({\n          action,\n          selected: items.includes(action),\n        })),\n      });\n    }\n  }\n\n  _getButtonSelectedStyle() {\n    return this.props.selectedButtonStyle && this.props.selectedButtonStyle;\n  }\n\n  _getButtonUnselectedStyle() {\n    return this.props.unselectedButtonStyle && this.props.unselectedButtonStyle;\n  }\n\n  _getButtonDisabledStyle() {\n    return this.props.disabledButtonStyle && this.props.disabledButtonStyle;\n  }\n\n  _getButtonIcon(action) {\n    const {iconMap} = this.props;\n    if (iconMap && iconMap[action]) {\n      return iconMap[action];\n    } else {\n      return getDefaultIcon()[action];\n    }\n  }\n\n  handleKeyboard() {\n    const editor = this.editor;\n    if (!editor) return;\n    if (editor.isKeyboardOpen) {\n      editor.dismissKeyboard();\n    } else {\n      editor.focusContentEditor();\n    }\n  }\n\n  _onPress(action) {\n    const {onPressAddImage, onInsertLink, insertVideo} = this.props;\n    const editor = this.editor;\n    if (!editor) return;\n\n    switch (action) {\n      case actions.insertLink:\n        if (onInsertLink) return onInsertLink();\n      case actions.setBold:\n      case actions.setItalic:\n      case actions.undo:\n      case actions.redo:\n      case actions.insertBulletsList:\n      case actions.insertOrderedList:\n      case actions.checkboxList:\n      case actions.setUnderline:\n      case actions.heading1:\n      case actions.heading2:\n      case actions.heading3:\n      case actions.heading4:\n      case actions.heading5:\n      case actions.heading6:\n      case actions.code:\n      case actions.blockquote:\n      case actions.line:\n      case actions.setParagraph:\n      case actions.removeFormat:\n      case actions.alignLeft:\n      case actions.alignCenter:\n      case actions.alignRight:\n      case actions.alignFull:\n      case actions.setSubscript:\n      case actions.setSuperscript:\n      case actions.setStrikethrough:\n      case actions.setHR:\n      case actions.indent:\n      case actions.outdent:\n        editor.showAndroidKeyboard();\n        editor.sendAction(action, 'result');\n        break;\n      case actions.insertImage:\n        onPressAddImage && onPressAddImage();\n        break;\n      case actions.insertVideo:\n        insertVideo && insertVideo();\n        break;\n      case actions.keyboard:\n        this.handleKeyboard();\n        break;\n      default:\n        this.props[action] && this.props[action]();\n        break;\n    }\n  }\n\n  _defaultRenderAction(action, selected) {\n    let that = this;\n    const icon = that._getButtonIcon(action);\n    const {iconSize, iconGap, disabled, itemStyle} = that.props;\n    const style = selected\n      ? that._getButtonSelectedStyle()\n      : that._getButtonUnselectedStyle();\n    const tintColor = disabled\n      ? that.props.disabledIconTint\n      : selected\n      ? that.props.selectedIconTint\n      : that.props.iconTint;\n    return (\n      <TouchableOpacity\n        key={action}\n        disabled={disabled}\n        style={[{width: iconGap + iconSize}, styles.item, itemStyle, style]}\n        onPress={() => that._onPress(action)}>\n        {icon ? (\n          typeof icon === 'function' ? (\n            icon({selected, disabled, tintColor, iconSize, iconGap})\n          ) : (\n            <Image\n              source={icon}\n              style={{\n                tintColor,\n                height: iconSize,\n                width: iconSize,\n              }}\n            />\n          )\n        ) : null}\n      </TouchableOpacity>\n    );\n  }\n\n  _renderAction(action, selected) {\n    return this.props.renderAction\n      ? this.props.renderAction(action, selected)\n      : this._defaultRenderAction(action, selected);\n  }\n\n  render() {\n    const {style, disabled, children, flatContainerStyle} = this.props;\n    const vStyle = [\n      styles.barContainer,\n      style,\n      disabled && this._getButtonDisabledStyle(),\n    ];\n    return (\n      <View style={vStyle}>\n        <FlatList\n          horizontal\n          keyboardShouldPersistTaps={'always'}\n          keyExtractor={(item, index) => item.action + '-' + index}\n          data={this.state.data}\n          alwaysBounceHorizontal={false}\n          showsHorizontalScrollIndicator={false}\n          renderItem={({item}) =>\n            this._renderAction(item.action, item.selected)\n          }\n          contentContainerStyle={flatContainerStyle}\n        />\n        {children}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  barContainer: {\n    height: 44,\n    backgroundColor: '#efefef',\n    alignItems: 'center',\n  },\n\n  item: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}